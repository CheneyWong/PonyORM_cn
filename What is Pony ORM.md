# 什么是 Pony ORM

ORM 是“object-relational-mapper”的首字母缩写。ORM 框架允许工程师以对象的形式来操作数据库中的内容。关系型数据库的内容是一条一条的存储在一个个的表里面的。然而，当使用一种高级的、面向对象的编程语言时，如果从数据库中取回的数据也是以对象的形式，那将是一个极大的遍历。Pony ORM 就是一个 Python 的编程库，让你能够放方便的以对象的形式操作数据库中一行行的数据。

目前已有其他很流行的映射方案的实现，例如 Django 和 SQLAlchemy，但是 Pony 在有些方面有明显的优势。

- 数据库查询时的一个方便的例外语法
- 自动的数据库查询优化
- 优雅的解决 N+1 问题
- 图形化的数据库编辑器

跟 Django 相较，Pony 还支持：

- IdentityMap 模式
- 自动的事务管理
- 自动的查询结果缓存
- 全面支持 composite keys
- 更方便的书写 LEFT JOIN，HAVING 等多个 SQL 特色功能

Pony 有个有趣的特色能让你使用 Python 中生成器的表达式来跟数据库交互。这个方法能让熟悉 Python 语法的程序员，即使对数据库不甚了解，也可以轻松编写数据库查询语句。下面就是一个这种查询的例子：
`select(c for c in Customer if sum(c.orders.total_price) > 1000)`
在这个查询中，我们想要取回所有总消费大于1000的客户。`select` 是 Pony ORM 提供的一个函数，这个函数接受一个描述了数据库查询目的的生成器作为参数。通常，生成器会在 python 中解释执行，但是当它作为 `select` 函数的参数的时候，会自动被翻译为 SQL 语句，然后在数据库中被执行。`Customer` 是一程序启动时就创建的跟数据表结构对应的一个类型。

不是所有的 ORM 都提供这种方便的查询语法。Pony 既增加了易用性，也保证数据操作的效率。查询语句被转为快速高效的 SQL 语句。基于 DBMS ，对于不同的数据库，生成的 SQL 语句可能是不同的。无论对于哪种数据库，Python 代码将是相同的，保证了应用的可移植性。

Pony 让所有程序员，即使不是 SQL 专家，也能编写复杂高效的查询语句。同时，Pony 也不“仇视” SQL —— 如果有人需要编写纯 SQL ，例如去调用预定的程序，他也可以通过 Pony 轻松实现。Pony 的宗旨是简化 Web 应用的开发，Pony 的典型应用就是创建动态网页。

 可以通过email： team (at) ponyorm.com  联系到 Pony ORM 的团队。

